C51 COMPILER V9.60.0.0   IRFAPP_MAIN                                                       06/19/2021 13:57:50 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE IRFAPP_MAIN
OBJECT MODULE PLACED IN .\Objects\irfapp_main.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE ..\App\irfapp_main.c LARGE OPTIMIZE(0,SPEED) BROWSE INCDIR(..\App;..\Com
                    -mon;..\Driver;..\Mid;..\Utilities) DEBUG OBJECTEXTEND PRINT(.\Listings\irfapp_main.lst) OBJECT(.\Objects\irfapp_main.obj
                    -)

line level    source

   1          /*
   2           *      irfapp_main.c
   3           *
   4           *      Created on: Dec 25, 2020
   5           *      Author: Truong VV
   6           */
   7          
   8          #include "N76E003.h"
   9          #include "SFR_Macro.h"
  10          #include "Function_Define.h"
  11          #include "irfapp_main.h"
  12          
  13          
  14          volatile uint8_t deviceAnnounceFlag = 0;
  15          volatile uint8_t checkConnectFlag = 0;
  16          volatile uint8_t startRunFlag = 0;
  17          volatile uint8_t stopRunFlag = 0;
  18          volatile uint8_t updownFloorFlag = 0;
  19          volatile uint8_t getStateMotorFlag = 0;
  20          volatile uint8_t getStateFloorFlag = 0;
  21          volatile uint8_t setSpeedMotorFlag = 0;
  22          volatile uint8_t getAllStateFlag = 0;
  23          volatile uint8_t resetDeviceFlag = 0;
  24          volatile uint8_t speedValue = 0;
  25          volatile uint8_t floorValue = 1;
  26          
  27          /******************************************************************************/
  28          /*                              FUNCTION                                      */
  29          /******************************************************************************/
  30          static void APP_DeviceAnnounce();
  31          
  32          static void APP_CheckConnect();
  33          
  34          static void APP_StartRun();
  35          
  36          static void APP_StopRun();
  37          
  38          static void APP_UpDownFloor(u8 *buff);
  39          
  40          static void APP_GetStateMotor();
  41          
  42          static void APP_GetStateFloor();
  43          
  44          static void APP_SetSpeedMotor(u8 *buff);
  45          
  46          static void APP_GetAllState();
  47          
  48          static void APP_ResetDevice();
  49          
  50          /**
  51           * @func   APP_CheckCommandExistAndExecutes
  52           * @brief  None
  53           * @param  
C51 COMPILER V9.60.0.0   IRFAPP_MAIN                                                       06/19/2021 13:57:50 PAGE 2   

  54           * @retval None
  55           */
  56          void APP_CheckCommandExistAndExecutes(u8 command, u8 type, u8* buff, u8 length)
  57          {
  58   1          u8 type1=type;
  59   1          u8 length1=length;
  60   1          switch (command)
  61   1          {
  62   2          case DEVICE_ANNOUNCE:
  63   2              APP_DeviceAnnounce();
  64   2              break;
  65   2          case CHECK_CONNECT:
  66   2              APP_CheckConnect();
  67   2              break;
  68   2          case START_RUN:
  69   2              APP_StartRun();
  70   2              break;
  71   2          case STOP_RUN:
  72   2              APP_StopRun();
  73   2              break;
  74   2          case UP_DOW_FLOOR:
  75   2              APP_UpDownFloor(buff);
  76   2              break;
  77   2          case GET_STATE_MOTOR:
  78   2              APP_GetStateMotor();
  79   2              break;
  80   2          case GET_STATE_FLOOR:
  81   2              APP_GetStateFloor();
  82   2              break;
  83   2          case SET_SPEED_MOTOR:
  84   2              APP_SetSpeedMotor(buff);
  85   2              break;
  86   2          case GET_ALL_STATE:
  87   2              APP_GetAllState();
  88   2              break;
  89   2          case RESET_DEVICE:
  90   2              APP_ResetDevice();
  91   2              break;
  92   2          default:
  93   2              break;
  94   2          }
  95   1      }
  96          
  97          
  98          /**
  99           * @func   APP_DeviceAnnounce
 100           * @brief  None
 101           * @param  
 102           * @retval None
 103           */
 104          static void APP_DeviceAnnounce()
 105          {
 106   1          deviceAnnounceFlag = 1;
 107   1      }
 108          
 109          /**
 110           * @func   APP_CheckConnect
 111           * @brief  None
 112           * @param  
 113           * @retval None
 114           */
 115          static void APP_CheckConnect()
C51 COMPILER V9.60.0.0   IRFAPP_MAIN                                                       06/19/2021 13:57:50 PAGE 3   

 116          {
 117   1              checkConnectFlag = 1;
 118   1      }
 119          
 120          /**
 121           * @func   APP_StartRun
 122           * @brief  None
 123           * @param  
 124           * @retval None
 125           */
 126          static void APP_StartRun()
 127          {
 128   1          startRunFlag = 1;
 129   1      }
 130          
 131          /**
 132           * @func   APP_StopRun
 133           * @brief  None
 134           * @param  
 135           * @retval None
 136           */
 137          static void APP_StopRun()
 138          {
 139   1          stopRunFlag = 1;
 140   1      }
 141          
 142          /**
 143           * @func   APP_UpDownFloor
 144           * @brief  None
 145           * @param  
 146           * @retval None
 147           */
 148          static void APP_UpDownFloor(u8 *buff)
 149          {
 150   1          updownFloorFlag = 1;
 151   1          floorValue = buff[0];
 152   1      }
 153          
 154          /**
 155           * @func   APP_GetStateMotor
 156           * @brief  None
 157           * @param  
 158           * @retval None
 159           */
 160          static void APP_GetStateMotor()
 161          {
 162   1          getStateMotorFlag = 1;
 163   1      
 164   1      }
 165          
 166          /**
 167           * @func   APP_GetStateFloor
 168           * @brief  None
 169           * @param  
 170           * @retval None
 171           */
 172          static void APP_GetStateFloor()
 173          {
 174   1          getStateFloorFlag = 1;
 175   1      }
 176          
 177          /**
C51 COMPILER V9.60.0.0   IRFAPP_MAIN                                                       06/19/2021 13:57:50 PAGE 4   

 178           * @func   APP_SetSpeedMotor
 179           * @brief  None
 180           * @param  
 181           * @retval None
 182           */
 183          static void APP_SetSpeedMotor(u8 *buff)
 184          {
 185   1          setSpeedMotorFlag = 1;
 186   1          speedValue = buff[0];
 187   1      }
 188          
 189          /**
 190           * @func   APP_GetAllState
 191           * @brief  None
 192           * @param  
 193           * @retval None
 194           */
 195          static void APP_GetAllState()
 196          {
 197   1          getAllStateFlag = 1;
 198   1      }   
 199          
 200          /**
 201           * @func   APP_ResetDevice
 202           * @brief  None
 203           * @param  
 204           * @retval None
 205           */
 206          static void APP_ResetDevice()
 207          {
 208   1          resetDeviceFlag = 1;
 209   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    278    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =     26    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
