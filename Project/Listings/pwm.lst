C51 COMPILER V9.60.0.0   PWM                                                               06/13/2021 10:03:36 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE PWM
OBJECT MODULE PLACED IN .\Objects\pwm.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE ..\Driver\pwm.c LARGE OPTIMIZE(0,SPEED) BROWSE INCDIR(..\App;..\Common;.
                    -.\Driver;..\Mid;..\Utilities) DEBUG OBJECTEXTEND PRINT(.\Listings\pwm.lst) OBJECT(.\Objects\pwm.obj)

line level    source

   1          /*
   2           * Copyright (c) 2021
   3           * Team, JSC.
   4           * All Rights Reserved
   5           *
   6           *
   7           * Description:
   8           *
   9           * Author: Truongvv
  10           *
  11           * Last Changed By:  $Author: Truongvv $
  12           * Revision:         $Revision: 1.0 $
  13           * Last Changed:     $Date: x/x/xxxx $
  14           */
  15          
  16          #include "N76E003.h"
  17          #include "SFR_Macro.h"
  18          #include "Function_Define.h"
  19          #include "pwm.h"
  20          #include "delay.h"
  21          /**
  22           * @func   PWM_Init
  23           * @brief  Inti PWM2 : Pin1.0, Fpwm=1Mhz, PWM Freq = 1KHz
  24           *         Imdependnt mode, edge type
  25           * @param  None
  26           * @retval None
  27           */
  28          void PWM_Init (void)
  29          {
  30   1      /*  
  31   1          PIOCON0 |= (1 << 2);    // P10 is pin PWM output
  32   1          PWMCON0 |= (1 << 4);    // Clear PWM 16BIT COUNTER
  33   1          PWM_IMDEPENDENT_MODE;
  34   1          PWM_CLOCK_DIV_16; */
  35   1          P10_Quasi_Mode;
  36   1          PWM0_P12_OUTPUT_ENABLE;
  37   1          PWM_IMDEPENDENT_MODE;
  38   1          PWM_EDGE_TYPE;
  39   1          set_CLRPWM;                 /* Clear PWM 16 bit counter */
  40   1          PWM_CLOCK_FSYS;             /* 16MHz */
  41   1          PWM_CLOCK_DIV_8;            /* Fpwm = 1MHz */
  42   1          PWM_OUTPUT_ALL_NORMAL;
  43   1          /* Set frequency */
  44   1          PWMPH = 0x00;               /* PWM freq = Fpwm/((PWMPH,PWMPL)+1) = 1MHz/1000 =1kHz*/
  45   1          PWMPL = 0x85;
  46   1          
  47   1      }
  48          /**
  49           * @func   PWM_SetPercentDuty
  50           * @brief  None
  51           * @param  
  52           * @retval None
  53           */
  54          void PWM_SetDuty (uint16_t pwmDuty)
C51 COMPILER V9.60.0.0   PWM                                                               06/13/2021 10:03:36 PAGE 2   

  55          {
  56   1          /* stop pwm */
  57   1          clr_PWMRUN;
  58   1          PWM0H = (uint8_t)((pwmDuty & 0xFF00) >> 8);
  59   1          PWM0L = (uint8_t)(pwmDuty & 0x00FF);
  60   1          set_LOAD;
  61   1          set_PWMRUN;
  62   1      }
  63          
  64          /**
  65           * @func   PWM_Stop
  66           * @brief  None 
  67           * @param  
  68           * @retval None
  69           */
  70          //void PWM_Stop(uint16_t pwmDuty)
  71          //{
  72          //    uint8_t i;
  73          //    for(i = pwmDuty; i < PWM_MaxDuty; i=i+10)
  74          //    {
  75          //        PWM_SetDuty(i);
  76          //        delay_ms(20);
  77          //    }
  78          //}
  79          
  80          /**
  81           * @func   PWM_Start
  82           * @brief  None
  83           * @param  
  84           * @retval None
  85           */
  86          //void PWM_Start(uint16_t pwmDuty)
  87          //{
  88          //    uint16_t i;
  89          //    for(i = 500; i > pwmDuty; i=i-10)
  90          //    {
  91          //        PWM_SetDuty(i);
  92          //        delay_ms(20);
  93          //    }
  94          //}


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     80    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =      2    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
