C51 COMPILER V9.60.0.0   IRF                                                               06/13/2021 16:48:30 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE IRF
OBJECT MODULE PLACED IN .\Objects\irf.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE ..\Mid\irf.c LARGE OPTIMIZE(0,SPEED) BROWSE INCDIR(..\App;..\Common;..\D
                    -river;..\Mid;..\Utilities) DEBUG OBJECTEXTEND PRINT(.\Listings\irf.lst) TABS(2) OBJECT(.\Objects\irf.obj)

line level    source

   1          /*
   2           * Copyright (c) 2021
   3           * Team, JSC.
   4           * All Rights Reserved
   5           *
   6           *
   7           * Description:
   8           *
   9           * Author: Truongvv
  10           *
  11           * Last Changed By:  $Author: Truongvv $
  12           * Revision:         $Revision: 1.0 $
  13           * Last Changed:     $Date: x/x/xxxx $
  14           */
  15          #include "N76E003.h"
  16          #include "SFR_Macro.h"
  17          #include "Function_Define.h"
  18          #include "irfapp_main.h"
  19          #include "uart.h"
  20          #include "queue.h"
  21          #include "xor.h"
  22          #include "irf.h"
  23          
  24          QUEUEx_t    irf_CommandQueue;
  25          irf_Command_t irf_CommandBuff[IRF_QUEUE_MAX];
  26          extern volatile int checkStopCmd;
  27          /******************************************************************************/
  28          /*                            FUNCTIONS                              */
  29          /******************************************************************************/
  30          static void IRF_CallBackHandle(void);
  31          
  32          /**
  33           * @func    IRF_Init
  34           * @brief   None
  35           * @param   None
  36           */
  37          void IRF_Init(void)
  38          {
  39   1          UART_Init(UART_BAUDRATE);
  40   1          UART_CallBackInit(IRF_CallBackHandle);
  41   1          QUEUE_Init(&irf_CommandQueue, (u8*)&irf_CommandBuff,\
  42   1                      IRF_QUEUE_MAX, sizeof(irf_Command_t));
  43   1          UART_Enable();
  44   1      }
  45          
  46          static findCommandBuff(char *buff)
  47          {
  48   1          
  49   1      }
*** WARNING C280 IN LINE 46 OF ..\Mid\irf.c: 'buff': unreferenced local variable
  50          
  51          /**
  52           * @func    IRF_CallBackHandle
  53           * @brief   None
C51 COMPILER V9.60.0.0   IRF                                                               06/13/2021 16:48:30 PAGE 2   

  54           * @param   None
  55           */
  56          static void IRF_CallBackHandle(void)
  57          {
  58   1          static u8 revByte = 0;
  59   1          static u16 revByteCount = 0;
  60   1          static u8 checkError = 0;
  61   1          int i=0;
  62   1          u8 revBuff[IRF_HEADER + IRF_BUFF_MAX + 1];
  63   1          u8 sendError[5];
  64   1          revByte = UART_RevData();
  65   1          revBuff[revByteCount++] = revByte;
  66   1          /* Check if cmd is stop then do not queue*/
  67   1          if (revBuff[0] == STOP_RUN)
  68   1          {
  69   2              checkStopCmd = 1;
  70   2          }
  71   1           if (revByteCount >= IRF_HEADER) {
  72   2              if(revByteCount == (IRF_HEADER + revBuff[3] + 1))
  73   2              {
  74   3                  if(revBuff[IRF_HEADER + revBuff[3]] == XOR_Caculator(revBuff, 0, IRF_HEADER + revBuff[3]))
  75   3                  {
  76   4                      QUEUE_Push(&irf_CommandQueue, revBuff);
  77   4                  } else {
  78   4                      checkError ++;
  79   4                      UART_SendData("RJ",2);
  80   4                  }
  81   3                  revByteCount = 0;
  82   3              }
  83   2          }
  84   1      }
*** WARNING C280 IN LINE 63 OF ..\Mid\irf.c: 'sendError': unreferenced local variable
  85          
  86          /**
  87           * @func    IRF_Proc
  88           * @brief   None
  89           * @param   None
  90           */
  91          void IRF_Proc(void)
  92          {
  93   1          irf_Command_t irf_CommandBuff;
  94   1          if(!QUEUE_Empty(&irf_CommandQueue))
  95   1          {
  96   2              QUEUE_Get(&irf_CommandQueue, (u8*)&irf_CommandBuff);
  97   2              APP_CheckCommandExistAndExecutes(\
  98   2                  irf_CommandBuff.command, irf_CommandBuff.type,\
  99   2                  irf_CommandBuff.buff, irf_CommandBuff.length); 
 100   2          }
 101   1      }
 102          
 103          /**
 104           * @func    IRF_Send
 105           * @brief   None
 106           * @param   None
 107           */
 108          void IRF_Send(u8* buff, u8 length)
 109          {
 110   1          UART_SendData(buff, length);
 111   1      }
*** WARNING C290 IN LINE 49 OF ..\Mid\irf.c: missing return value


C51 COMPILER V9.60.0.0   IRF                                                               06/13/2021 16:48:30 PAGE 3   

MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    442    ----
   CONSTANT SIZE    =      3    ----
   XDATA SIZE       =    227    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  3 WARNING(S),  0 ERROR(S)
